<div class="task-list-container">
  <h2 class="task-heading">Your Tasks 📒</h2>

  <div *ngIf="tasks.length === 0; else elseBlock" class="no-task-message">
    Currently, there's no task! So Add your task 📝
  </div>
  <ng-template #elseBlock>
    <h3 class="filter-heading">Sort by</h3>
    <div class="btn-class">
      <button class="filter-btn" (click)="sortTasksByDueDate()">
        Due Date
      </button>
      <button class="filter-btn" (click)="sortTasksByPriority()">
        Priority
      </button>
      <button class="filter-btn" (click)="sortTasksByStatus()">Status</button>
    </div>
    <ul class="task-items" *ngFor="let task of tasks">
      <li class="task-item">
        <span class="task-title">{{ task.title }}</span>
        <span class="task-description">{{ task.description }}</span>
        <span class="task-due-date">Due: {{ task.dueDate }}</span>
        <span class="task-priority">Priority: {{ task.priority }}</span>
        <span class="task-status">Status: {{ task.status }}</span>
        <button class="status-btn" (click)="showStatusPopup(task, task.id)">
          Change Status
        </button>
        <button class="delete-btn" (click)="onDelete(task.id)">Delete</button>
      </li>
    </ul>
    <button class="export-btn" (click)="exportToCSV()">
      Export Tasks to CSV
    </button>
  </ng-template>
</div>

<div class="status-popup" *ngIf="showPopup">
  <h3 class="status-popup-heading">Select Status</h3>
  <label>
    <input
      type="radio"
      name="status"
      value="To-Do"
      [(ngModel)]="selectedStatus"
    />
    To-Do
  </label>
  <label>
    <input
      type="radio"
      name="status"
      value="In-Progress"
      [(ngModel)]="selectedStatus"
    />
    In-Progress
  </label>
  <label>
    <input
      type="radio"
      name="status"
      value="Completed"
      [(ngModel)]="selectedStatus"
    />
    Completed
  </label>
  <button class="status-btn" (click)="updateStatus()">Save</button>
  <button class="cancel-btn" (click)="closePopup()">Cancel</button>
</div>
